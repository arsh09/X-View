# X-View core
This repository contains the core implementation of the __X-View__ library 
which implements a solution for the _semantic SLAM_ problem.

### Structure
Here follows a description of the folder structure adopted in the 
development of this project.

* [__root__](./) the current directory containing all files/data relevant to 
the X-View library. The absolute path of this directory is available in 
X-View as `x_view::getRootDirectory()`.
  * [__include__](./include) directory containing all _header_ files relevant
   to 
X-View.
  * [__logs__](./logs) directory used as default destination for all _log_ 
  files 
generated by executing X-View and the associated tests.
The absolute path of this directory is available in X-View as 
`x_view::getLogDirectory()`. In order to use a different log directory, the 
[CMakeLists.txt](./CMakeLists.txt) file must be edited accordingly.
  * [__output__](./output) directory used as default destination for all 
 _output_ 
files 
generated by executing X-View. The absolute path of this directory is 
available in X-View as `x_view::getOutputDirectory()`.
In order to use a different output directory, the 
[CMakeLists.txt](./CMakeLists.txt) file must be edited accordingly.
  * [__src__](./src) directory containing all _source_ files relavant to X-View.
  * [__test__](./test) directory containing _test_ source files which test the 
correct functioning of X-View.

### Installation

#### Prerequisites

First install the required system packages:
```sh
$ sudo apt-get install python-wstool doxygen
```

#### Building
* Clone the X-View repository in the local catkin `src` folder:
  ```sh
  $ cd ~/catkin_ws/src
  $ git clone https://github.com/ethz-asl/x-view_private.git
  ```

* Download the dependencies of X-View using `wstool`:
  ```sh
  $ wstool init
  $ wstool merge x-view_private/dependencies.rosinstall
  $ wstool update
  ```
  
* Build the entire project (this might take up to 30 minutes)
  ```sh
  $ cd ~/catkin_ws
  $ catkin init && catkin config --cmake-args -DCMAKE_BUILD_TYPE=Release
  $ catkin build --force-cmake -j8
  ```

* Build and run X-View tests
  ```sh
  $ catkin build --force-cmake -j8 --catkin-make-args tests
  $ ./devel/libs/x_view_core/x_view_core_tests
  ```
  
#### Note
It is possible to build the entire __X-View__ library in _single_ or _double_
 precision. To change the build type, you are required to manually modify the
  [following header file](./include/x_view_core/x_view_types.h) as follows:
  ```c++
  // Single or double floating point precision.
  // Change this MACRO to 0 to use single precision where possible.
  #ifndef X_VIEW_USE_DOUBLE_PRECISION
  #define X_VIEW_USE_DOUBLE_PRECISION 0 // Uses double precision if set to '1', single precision otherwise.
  #endif
  ```
